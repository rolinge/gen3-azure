
server {
listen 80;
listen [::]:80;
server_name optumdbedev-color-drop.westus.azurecontainer.io;

  location /.well-known {
  alias /usr/share/nginx/html/.well-known;
  }

  location / {
  # enforce https
  return 301 https://$server_name:443$request_uri;
  }
}

server {
listen 443 ssl http2;
listen [::]:443 ssl http2;
server_name optumdbedev-color-drop.westus.azurecontainer.io;

#ssl_certificate /etc/letsencrypt/live/minio.example.com/fullchain.pem;
#ssl_certificate_key /etc/letsencrypt/live/minio.example.com/privkey.pem;

ssl_certificate     /etc/nginx/conf.d/ssl/minio.color.dev.crt;
ssl_certificate_key /etc/nginx/conf.d/ssl/minio.color.dev.npp.key;

ssl_protocols TLSv1.2;
ssl_prefer_server_ciphers on;
ssl_dhparam /etc/nginx/conf.d/dhparam.pem;
ssl_ciphers EECDH+AESGCM:EDH+AESGCM;
ssl_ecdh_curve secp384r1;
ssl_session_timeout  10m;
ssl_session_cache shared:SSL:10m;
ssl_session_tickets off;
ssl_stapling on;
ssl_stapling_verify on;
resolver 1.1.1.1 1.0.0.1 valid=300s;
resolver_timeout 5s;

# add_header Strict-Transport-Security "max-age=15768000; includeSubDomains; preload;";

fastcgi_hide_header X-Powered-By;

client_max_body_size 0;
client_header_timeout 60;
client_body_timeout 86400;
fastcgi_read_timeout 86400;
proxy_connect_timeout 60;
proxy_read_timeout 86400;
proxy_send_timeout 86400;
send_timeout 86400;

location / {
proxy_set_header Host $http_host;
proxy_set_header X-Real-IP $remote_addr;
proxy_set_header X-Forwarded-Proto $scheme;
proxy_pass http://optumdbedev-color-minio.westus.azurecontainer.io:9000;
}
}
